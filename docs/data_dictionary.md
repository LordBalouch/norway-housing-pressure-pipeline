# Data Dictionary — Norway Housing Pressure Tracker (Part 2)

This document describes the **processed** datasets produced in Part 2 (`data/processed/`).  
All processed outputs are generated by: `src/02_transform_clean.py`

## Conventions

- **quarter**: string formatted as `YYYYQn` (e.g., `1992Q1`)
- **quarter_start**: first day of the quarter (ISO date, e.g., `1992-01-01`)
- **dataset**: stable dataset identifier used across processed tables
- **series**: indicator variant (e.g., index vs seasonally adjusted index)

Important note on CPI:
- The CPI extract in this project is stored with **years as columns** and a single `Maaned` code (`90` observed).
- The local Part 1 metadata file (`docs/metadata_part1.json`) captured **request parameters** but not the PXWeb **value-text mapping** for `Maaned`, so the pipeline documents this as `metadata_part1_missing_value_texts`.
- For quarterly alignment, CPI is treated as **annual** and repeated across Q1–Q4 for each year (deterministic, explicitly flagged via `method`).

---

## 1) `fact_hpi_long`

**File(s):**
- `data/processed/fact_hpi_long.csv`
- `data/processed/fact_hpi_long.parquet`

**Grain:** one row per (`boligtype_code`, `series`, `quarter`)

**Columns:**
- `dataset` (string): always `hpi_07221`
- `boligtype_code` (string/int-like): housing type code from SSB extract (e.g., `0`)
- `series` (string): HPI series name (e.g., `Boligindeks`, `SesJustBoligindeks`)
- `time_period` (string): original SSB quarter label in `YYYYKQ` format (e.g., `1992K1`)
- `quarter` (string): standardized quarter `YYYYQn` (e.g., `1992Q1`)
- `quarter_start` (date): quarter start date
- `value` (float): index value

---

## 2) `fact_cpi_long`

**File(s):**
- `data/processed/fact_cpi_long.csv`
- `data/processed/fact_cpi_long.parquet`

**Grain:** one row per (`series`, `year`, `maaned_code`)

**Columns:**
- `dataset` (string): always `cpi_08981`
- `maaned_code` (string/int-like): month/period code from SSB extract (observed `90`)
- `maaned_label` (string): not available in captured Part 1 metadata (stored as null)
- `period_kind` (string): inference label (e.g., `annual_assumed_from_code`)
- `series` (string): CPI series name (e.g., `KpiIndMnd`)
- `year` (int): year extracted from wide column names
- `time_period` (string): same as `year` (string form)
- `value` (float): CPI index value

---

## 3) `fact_cpi_quarterly`

**File(s):**
- `data/processed/fact_cpi_quarterly.csv`
- `data/processed/fact_cpi_quarterly.parquet`

**Grain:** one row per (`series`, `quarter`, `maaned_code`)  
(Effectively one CPI index per quarter given the current extract.)

**Columns:**
- `dataset` (string): `cpi_08981`
- `maaned_code` (string/int-like): observed `90`
- `maaned_label` (string): null (see note above)
- `series` (string): e.g., `KpiIndMnd`
- `year` (int): originating year
- `quarter` (string): `YYYYQn`
- `quarter_start` (date): quarter start date
- `value` (float): CPI index (annual repeated to quarters)
- `method` (string): alignment method (e.g., `annual_value_repeated_each_quarter`)

---

## 4) `fact_policy_rate`

**File(s):**
- `data/processed/fact_policy_rate.csv`
- `data/processed/fact_policy_rate.parquet`

**Grain:** one row per (`series_id`, `date`)

**Columns (core):**
- `dataset` (string): `norgesbank_policy_rate`
- `series_id` (string): composite id built from code dimensions (`INSTRUMENT_TYPE.TENOR.UNIT_MEASURE.COLLECTION`)
- `date` (date): parsed from `TIME_PERIOD`
- `rate` (float): numeric policy rate (`OBS_VALUE`)

**Columns (descriptor/context):**
- `freq_code`, `freq_label`
- `instrument_type_code`, `instrument_type_label`
- `tenor_code`, `tenor_label`
- `unit_code`, `unit_label`
- `collection_code`, `collection_label`
- `decimals`

---

## 5) `fact_policy_rate_changes`

**File(s):**
- `data/processed/fact_policy_rate_changes.csv`
- `data/processed/fact_policy_rate_changes.parquet`

**Grain:** one row per (`series_id`, `change_date`) **when the rate changes**

**Columns:**
- `dataset` (string): `norgesbank_policy_rate`
- `series_id` (string): matches `fact_policy_rate.series_id`
- `change_date` (date): date of the change event
- `previous_rate` (float): prior observed rate
- `new_rate` (float): new observed rate
- `delta_rate` (float): `new_rate - previous_rate`

---

## 6) `analysis_ready_quarterly`

**File(s):**
- `data/processed/analysis_ready_quarterly.csv`
- `data/processed/analysis_ready_quarterly.parquet`

**Grain:** one row per (`boligtype_code`, `quarter`)

**Columns (expected; may vary slightly by availability):**
- Keys/time:
  - `boligtype_code`
  - `quarter`
  - `quarter_start`
- HPI:
  - `hpi_index` (from `Boligindeks`, if present)
  - `hpi_sa_index` (from `SesJustBoligindeks`, if present)
  - `hpi_index_qoq_pct`, `hpi_index_yoy_pct`
  - `hpi_sa_index_qoq_pct`, `hpi_sa_index_yoy_pct`
- CPI:
  - `cpi_index`
  - `cpi_method` (e.g., `annual_value_repeated_each_quarter`)
  - `cpi_yoy_pct`
- Real-price proxy:
  - `real_hpi_proxy = hpi_index / cpi_index`
  - `real_hpi_sa_proxy = hpi_sa_index / cpi_index`
- Policy quarterly context (optional; included if policy files exist):
  - `policy_rate_avg`, `policy_rate_end`, `policy_rate_min`, `policy_rate_max`, `policy_obs_count`
  - `policy_change_events`, `policy_delta_sum`, `policy_delta_abs_sum`

---

## Provenance and reproducibility

- Raw downloads: `src/01_download_raw.py`
- Transform/clean: `src/02_transform_clean.py`
- Part 2 validation metadata: `docs/metadata_part2.json`
